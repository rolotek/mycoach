---
phase: 07-friendlier-errors-and-i18n
plan: 02
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - apps/web/messages/en.json
  - apps/web/src/app/[locale]/(app)/dashboard/page.tsx
  - apps/web/src/app/[locale]/(app)/settings/page.tsx
  - apps/web/src/app/[locale]/(app)/chat/page.tsx
  - apps/web/src/app/[locale]/(app)/chat/[id]/page.tsx
  - apps/web/src/app/[locale]/(app)/chat/components/message-list.tsx
  - apps/web/src/app/[locale]/(app)/chat/components/chat-input.tsx
  - apps/web/src/app/[locale]/(app)/chat/components/agent-result.tsx
  - apps/web/src/app/[locale]/(app)/chat/components/agent-approval.tsx
  - apps/web/src/app/[locale]/(app)/chat/components/conversation-sidebar.tsx
  - apps/web/src/app/[locale]/(app)/chat/components/mode-toggle.tsx
  - apps/web/src/app/[locale]/(app)/agents/page.tsx
  - apps/web/src/app/[locale]/(app)/agents/[id]/page.tsx
  - apps/web/src/app/[locale]/(app)/documents/page.tsx
  - apps/web/src/app/[locale]/(app)/memory/page.tsx
  - apps/web/src/app/[locale]/(app)/projects/page.tsx
  - apps/web/src/app/[locale]/(app)/projects/[id]/page.tsx
  - apps/web/src/app/[locale]/(auth)/login/page.tsx
  - apps/web/src/app/[locale]/(auth)/signup/page.tsx
  - apps/web/src/app/[locale]/page.tsx
  - apps/web/src/components/app-sidebar.tsx
  - apps/web/src/components/page-header.tsx
  - apps/web/src/components/theme-toggle.tsx
  - apps/web/src/components/locale-toggle.tsx
autonomous: true

must_haves:
  truths:
    - "No user-visible UI string is hardcoded in app pages or shared components; all use useTranslations() / getTranslations() and a key"
    - "messages/en.json contains namespaced keys for common, auth, chat, settings, agents, documents, memory, projects, sidebar, errors (structure only for errors; values in 07-03)"
    - "Server components use getTranslations; client components use useTranslations with same namespace/key convention"
  artifacts:
    - path: "apps/web/messages/en.json"
      provides: "Full default English message set for all namespaces"
---

<objective>
Replace every user-facing hardcoded string in the web app with translation keys and populate messages/en.json (default English). Namespace keys by area: common, auth, chat, settings, agents, documents, memory, projects, sidebar, and a placeholder errors section for 07-03. After this plan, the app renders in English via keys only; no raw strings for labels, buttons, placeholders, or messages.

Purpose: Required for localization; 07-04 will copy this structure into other locale files.
Output: All UI strings moved to en.json; components use t('namespace.key') or useTranslations('namespace').
</objective>

<execution_context>
@./.cursor/get-shit-done/workflows/execute-plan.md
@./.cursor/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-friendlier-error-messages-and-localization-map-server-and-llm-errors-e-g-model-not-found-apicallerror-to-user-facing-localized-strings-via-key-to-string-mapping/07-01-SUMMARY.md
@apps/web/messages/en.json
@apps/web/src/app
@apps/web/src/components
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define en.json structure and common/auth/chat namespaces</name>
  <files>apps/web/messages/en.json</files>
  <action>
Expand apps/web/messages/en.json with full key set. Use flat or nested structure per next-intl convention (nested recommended). Namespaces:

- common: loading, save, cancel, delete, edit, dismiss, submit, back, next, error (generic), etc.
- auth: login, signup, email, password, loginFailed, signUpFailed, signInWithGoogle, signInWithMicrosoft, etc.
- chat: startConversation, thinking, you, coach, send, placeholder, dismiss (error), approve, reject, etc.
- settings: title, profile, apiKeys, usage, budget, etc.
- agents: title, createAgent, name, description, versionHistory, feedback, submitCorrection, etc.
- documents: title, upload, noDocuments, etc.
- memory: title, facts, noFacts, etc.
- projects: title, newProject, name, description, status, milestones, tasks, openChat, noProjects, etc.
- sidebar: dashboard, chat, agents, memory, documents, projects, settings, theme, language, etc.
- errors: leave as stub object {} or placeholders; 07-03 will add error keys.

Ensure keys used in 07-01 (e.g. locale switcher labels) are present. Add any key needed by existing UI when you replace strings in later tasks.
</action>
  <verify>
JSON is valid; no duplicate keys; nested structure is consistent.
</verify>
</task>

<task type="auto">
  <name>Task 2: Replace strings in auth and root pages</name>
  <files>apps/web/src/app/[locale]/(auth)/login/page.tsx, apps/web/src/app/[locale]/(auth)/signup/page.tsx, apps/web/src/app/[locale]/page.tsx</files>
  <action>
In login and signup pages: replace every user-visible string (title, button labels, error messages, placeholders) with useTranslations('auth') or getTranslations and the key from en.json. Use same keys in en.json.

In [locale]/page.tsx (home/landing): replace any visible text with translations (common or a home namespace if needed).
</action>
  <verify>
Build passes; login/signup and home show correct English text from messages.
</verify>
</task>

<task type="auto">
  <name>Task 3: Replace strings in app shell and chat</name>
  <files>apps/web/src/components/app-sidebar.tsx, apps/web/src/components/theme-toggle.tsx, apps/web/src/components/locale-toggle.tsx, apps/web/src/app/[locale]/(app)/layout.tsx, apps/web/src/app/[locale]/(app)/chat/page.tsx, apps/web/src/app/[locale]/(app)/chat/[id]/page.tsx, apps/web/src/app/[locale]/(app)/chat/components/message-list.tsx, apps/web/src/app/[locale]/(app)/chat/components/chat-input.tsx, apps/web/src/app/[locale]/(app)/chat/components/agent-approval.tsx, apps/web/src/app/[locale]/(app)/chat/components/agent-result.tsx, apps/web/src/app/[locale]/(app)/chat/components/conversation-sidebar.tsx, apps/web/src/app/[locale]/(app)/chat/components/mode-toggle.tsx</files>
  <action>
Replace all hardcoded strings in sidebar (nav labels, tooltips), theme toggle (Light, Dark, System), locale toggle (System, language names), chat page, chat [id] page (including error display: use a key for "Dismiss" and for the error message when it is a key — see 07-03 for error keys), message-list (Start a conversation, You, Coach, Thinking…), chat-input placeholder, agent-approval (approve/reject labels), agent-result (Thanks for the feedback, Submit correction, etc.), conversation-sidebar, mode-toggle labels. Use namespaces: sidebar, common, chat. Add any missing keys to en.json.
</action>
  <verify>
Build passes; chat and sidebar show only translated strings.
</verify>
</task>

<task type="auto">
  <name>Task 4: Replace strings in settings, agents, documents, memory, projects, dashboard</name>
  <files>apps/web/src/app/[locale]/(app)/dashboard/page.tsx, apps/web/src/app/[locale]/(app)/settings/page.tsx, apps/web/src/app/[locale]/(app)/agents/page.tsx, apps/web/src/app/[locale]/(app)/agents/[id]/page.tsx, apps/web/src/app/[locale]/(app)/documents/page.tsx, apps/web/src/app/[locale]/(app)/memory/page.tsx, apps/web/src/app/[locale]/(app)/projects/page.tsx, apps/web/src/app/[locale]/(app)/projects/[id]/page.tsx, apps/web/src/components/page-header.tsx</files>
  <action>
Replace every user-visible string in dashboard, settings, agents list, agent detail, documents, memory, projects list, project detail, and page-header with useTranslations/getTranslations and keys. Add any new keys to en.json (settings, agents, documents, memory, projects namespaces). Ensure headings, buttons, empty states, form labels, and table headers use keys.
</action>
  <verify>
Build passes; all app pages render English from messages; no raw strings in UI.
</verify>
</task>

</tasks>

After completion, create `.planning/phases/07-friendlier-error-messages-and-localization-map-server-and-llm-errors-e-g-model-not-found-apicallerror-to-user-facing-localized-strings-via-key-to-string-mapping/07-02-SUMMARY.md`

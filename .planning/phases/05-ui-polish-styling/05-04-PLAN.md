---
phase: 05-ui-polish-styling
plan: 04
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - apps/web/src/app/(app)/agents/page.tsx
  - apps/web/src/app/(app)/agents/[id]/page.tsx
  - apps/web/src/app/(app)/memory/page.tsx
  - apps/web/src/app/(app)/documents/page.tsx
autonomous: true
must_haves:
  truths:
    - "Agents list page uses shadcn/ui Card, Badge, Dialog, and Button components"
    - "Agent create/edit form appears in a Dialog instead of an inline panel"
    - "Agent detail page uses Tabs for system prompt vs version history vs feedback"
    - "Version cards use Badge components for change source (evolution, manual)"
    - "Memory page uses shadcn/ui Card and Badge for categorized facts with proper edit/delete UX"
    - "Documents page uses shadcn/ui Card with a styled drag-and-drop upload area"
    - "All four pages use semantic design tokens with no raw Tailwind color classes"
    - "Loading states use Skeleton components"
    - "All delete confirmations still work (window.confirm is acceptable)"
  artifacts:
    - path: "apps/web/src/app/(app)/agents/page.tsx"
      provides: "Agent list with Card grid, Dialog for create/edit, Badge for status"
    - path: "apps/web/src/app/(app)/agents/[id]/page.tsx"
      provides: "Agent detail with Tabs, version history cards, feedback summary"
    - path: "apps/web/src/app/(app)/memory/page.tsx"
      provides: "Categorized memory cards with Badge and inline edit"
    - path: "apps/web/src/app/(app)/documents/page.tsx"
      provides: "Document list with styled upload area and status badges"
  key_links:
    - from: "apps/web/src/app/(app)/agents/page.tsx"
      to: "@/components/ui/dialog"
      via: "Dialog for create/edit agent"
      pattern: "import.*Dialog.*from.*@/components/ui/dialog"
    - from: "apps/web/src/app/(app)/agents/[id]/page.tsx"
      to: "@/components/ui/tabs"
      via: "Tabs for prompt/versions/feedback sections"
      pattern: "import.*Tabs.*from.*@/components/ui/tabs"
    - from: "apps/web/src/app/(app)/memory/page.tsx"
      to: "@/components/ui/badge"
      via: "Badge for fact categories"
      pattern: "import.*Badge.*from.*@/components/ui/badge"
    - from: "apps/web/src/app/(app)/documents/page.tsx"
      to: "@/components/ui/card"
      via: "Card for document items"
      pattern: "import.*Card.*from.*@/components/ui/card"
---

<objective>
Restyle the agents (list + detail), memory, and documents pages using shadcn/ui components and design tokens.

Purpose: These four pages complete the full-app restyle. They have similar patterns (cards, badges, lists, inline forms) and can be restyled together efficiently.

Output: All four pages use consistent shadcn/ui components with semantic design tokens, completing the visual consistency across the entire app.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-ui-polish-styling/05-RESEARCH.md
@.planning/phases/05-ui-polish-styling/05-01-SUMMARY.md
@apps/web/src/app/(app)/agents/page.tsx
@apps/web/src/app/(app)/agents/[id]/page.tsx
@apps/web/src/app/(app)/memory/page.tsx
@apps/web/src/app/(app)/documents/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restyle agents list and agent detail pages</name>
  <files>
    apps/web/src/app/(app)/agents/page.tsx
    apps/web/src/app/(app)/agents/[id]/page.tsx
  </files>
  <action>
    **Agents list page (`agents/page.tsx`):**
    - Remove `min-h-screen bg-neutral-50 p-8` and `mx-auto max-w-4xl`. Replace with `<div className="p-4 md:p-6 space-y-6 max-w-5xl">`.
    - Use PageHeader: `<PageHeader title="Agents" description="Your specialist agent library" actions={<Button onClick={openCreate}><Plus className="mr-2 h-4 w-4" />Create Agent</Button>} />`
    - Replace the inline create/edit form with a shadcn/ui **Dialog**:
      - `<Dialog open={showForm} onOpenChange={(open) => !open && resetForm()}>` wrapping the form
      - DialogContent with DialogHeader (DialogTitle: "New Agent" or "Edit Agent", DialogDescription)
      - Form fields: Label + Input for name, Label + Textarea for description, Label + Textarea for system prompt, Label + Input for icon
      - DialogFooter: `<Button onClick={handleSave} disabled={...}>Save</Button>` and `<Button variant="outline" onClick={resetForm}>Cancel</Button>`
      - All inputs use shadcn/ui Input and Textarea components
    - Agent cards: use shadcn/ui Card component
      - `<Card className={cn("transition-colors", a.archivedAt && "opacity-60")}>` + CardHeader + CardContent + CardFooter
      - CardHeader: icon + agent name (as Link with `hover:underline`) + Badges (Starter: `<Badge variant="secondary">Starter</Badge>`, Archived: `<Badge variant="outline">Archived</Badge>`)
      - CardContent: description text with `text-muted-foreground`
      - CardFooter: action buttons using `<Button variant="ghost" size="sm">` for Edit, Archive/Unarchive, View History, Delete
      - Delete button: `<Button variant="ghost" size="sm" className="text-destructive hover:text-destructive">Delete</Button>`
    - Loading state: grid of 4 `<Card><CardHeader><Skeleton className="h-5 w-32" /></CardHeader><CardContent><Skeleton className="h-4 w-full" /><Skeleton className="h-4 w-2/3" /></CardContent></Card>` instead of "Loading..."
    - Empty state: styled with muted text + an illustration or just centered text with a call-to-action Button
    - Replace ALL raw color classes (bg-blue-600, text-neutral-*, border-neutral-*, bg-amber-100, etc.)

    **Agent detail page (`agents/[id]/page.tsx`):**
    - Remove `min-h-screen bg-neutral-50 p-8` and `mx-auto max-w-4xl`. Replace with `<div className="p-4 md:p-6 space-y-6 max-w-4xl">`.
    - Remove "Back to Agents" link -- the sidebar handles navigation. If desired, add a small breadcrumb-style link at the top: `<Button variant="ghost" size="sm" asChild><Link href="/agents"><ArrowLeft className="mr-2 h-4 w-4" />Back to Agents</Link></Button>`
    - Agent header: Use a Card with the agent icon, name, badges (Starter, Archived), and description
    - Use shadcn/ui **Tabs** to organize the three sections:
      - Tab "Prompt": shows current system prompt in a `<pre>` with `bg-muted rounded-lg p-4 font-mono text-sm overflow-auto max-h-64`
      - Tab "Versions": shows version history cards
      - Tab "Feedback": shows feedback summary (total, positive, negative counts)
    - Version cards (VersionCard component): use `<Card>` with:
      - CardHeader: "Version {n}" + `<Badge variant={changeSource === "evolution" ? "default" : "secondary"}>{changeSource}</Badge>` + date in `text-muted-foreground text-sm`
      - Revert button: `<Button variant="outline" size="sm">`
      - Change summary: `text-muted-foreground text-sm`
      - Show/hide prompt toggle: `<Button variant="ghost" size="sm">` or shadcn/ui Collapsible
      - Prompt content: `bg-muted rounded p-2 font-mono text-xs`
    - Replace ALL raw color classes (bg-green-100, bg-blue-100, bg-neutral-*, text-neutral-*, etc.)
    - Loading state for versions: Skeleton cards
    - Not found state: styled with muted text in a Card

    **Imports needed:**
    - Agents list: Card, CardHeader, CardContent, CardFooter from @/components/ui/card; Button from @/components/ui/button; Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter from @/components/ui/dialog; Input from @/components/ui/input; Textarea from @/components/ui/textarea; Label from @/components/ui/label; Badge from @/components/ui/badge; Skeleton from @/components/ui/skeleton; PageHeader from @/components/page-header; Plus icon from lucide-react; cn from @/lib/utils
    - Agent detail: Card, CardHeader, CardContent from @/components/ui/card; Button from @/components/ui/button; Badge from @/components/ui/badge; Tabs, TabsContent, TabsList, TabsTrigger from @/components/ui/tabs; Skeleton from @/components/ui/skeleton; ArrowLeft from lucide-react
  </action>
  <verify>
    - `cd apps/web && npx tsc --noEmit` passes
    - `grep "bg-blue-600\|bg-neutral-\|text-neutral-\|border-neutral-\|bg-amber-\|text-amber-\|bg-green-100\|text-green-800\|bg-blue-100\|text-blue-800" apps/web/src/app/\\(app\\)/agents/page.tsx` returns NO matches
    - `grep "bg-blue-600\|bg-neutral-\|text-neutral-\|border-neutral-\|bg-green-100\|bg-blue-100" apps/web/src/app/\\(app\\)/agents/\\[id\\]/page.tsx` returns NO matches
    - `grep "import.*Dialog" apps/web/src/app/\\(app\\)/agents/page.tsx` returns match
    - `grep "import.*Tabs" apps/web/src/app/\\(app\\)/agents/\\[id\\]/page.tsx` returns match
  </verify>
  <done>
    Agents list uses Card grid with Dialog for create/edit and Badge for status. Agent detail uses Tabs for prompt/versions/feedback with Card-based version history. Both pages use semantic design tokens with no raw color classes. All existing functionality (CRUD, archive, revert) works unchanged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Restyle memory and documents pages</name>
  <files>
    apps/web/src/app/(app)/memory/page.tsx
    apps/web/src/app/(app)/documents/page.tsx
  </files>
  <action>
    **Memory page (`memory/page.tsx`):**
    - Remove `min-h-screen bg-neutral-50 p-8` and `mx-auto max-w-3xl`. Replace with `<div className="p-4 md:p-6 space-y-6 max-w-3xl">`.
    - Use PageHeader: `<PageHeader title="What I Know About You" description="Facts extracted from our conversations. You can edit or remove any." />`
    - Replace the `CATEGORY_COLORS` object with a function that returns Badge variants or uses semantic colors. Use shadcn/ui Badge component:
      - `<Badge variant="secondary">{category}</Badge>` for all categories, or use different Badge variants. Since shadcn/ui Badge has limited built-in variants, use a custom approach:
      - Create a `categoryStyle` function that returns className strings using design tokens: goal -> `bg-green-500/10 text-green-700 dark:text-green-400`, preference -> `bg-blue-500/10 text-blue-700 dark:text-blue-400`, etc. These are acceptable because they're thematic accent colors, not raw styling. Wrap them in Badge: `<Badge variant="outline" className={categoryStyle(cat)}>{cat}</Badge>`
    - Fact cards: use shadcn/ui `<Card>` with CardContent
    - Edit mode: use shadcn/ui `<Textarea>` and `<Button>` instead of raw elements
    - Save button: `<Button size="sm">Save</Button>`
    - Cancel button: `<Button size="sm" variant="outline">Cancel</Button>`
    - Edit icon button: `<Button variant="ghost" size="icon" className="h-8 w-8">` with Pencil icon from lucide-react
    - Delete icon button: `<Button variant="ghost" size="icon" className="h-8 w-8 text-destructive hover:text-destructive">` with Trash2 icon from lucide-react
    - Replace the Unicode emoji icons (pencil, trash) with lucide-react Pencil and Trash2 icons
    - Confidence: `text-muted-foreground text-xs`
    - Source: `text-muted-foreground text-xs`
    - Category headers: `text-sm font-medium uppercase tracking-wide text-muted-foreground`
    - Loading state: Skeleton cards grouped by category
    - Empty state: styled with muted text and suggestion to start a conversation
    - Replace ALL raw color classes

    **Documents page (`documents/page.tsx`):**
    - Remove `min-h-screen bg-neutral-50 p-8` and `mx-auto max-w-3xl`. Replace with `<div className="p-4 md:p-6 space-y-6 max-w-3xl">`.
    - Use PageHeader: `<PageHeader title="Documents" description="Upload documents to inform your coaching sessions. Max 10MB per file." />`
    - Upload drop zone:
      - Normal: `rounded-xl border-2 border-dashed border-border p-8 text-center transition-colors`
      - Drag over: `border-primary bg-primary/5`
      - Uploading: `pointer-events-none opacity-60`
      - Add an Upload icon (lucide-react Upload) centered above the text
      - Label text: `text-muted-foreground hover:text-foreground cursor-pointer`
    - Upload error: `text-sm text-destructive` instead of `text-red-600`
    - Document list: section header "Your documents" using a subtle heading style
    - Each document: use shadcn/ui Card or a styled list item with:
      - Filename: `font-medium text-foreground`
      - Size + mime type: `text-sm text-muted-foreground`
      - Status badge: `<Badge variant={status === "ready" ? "default" : status === "error" ? "destructive" : "secondary"}>{status}</Badge>` (use shadcn/ui Badge variants instead of raw bg-green/red/yellow)
      - Date: `text-xs text-muted-foreground`
      - Delete button: `<Button variant="ghost" size="icon" className="h-8 w-8 text-destructive hover:text-destructive">` with Trash2 icon from lucide-react, replacing the Unicode trash emoji
    - Loading state: Skeleton list items instead of "Loading..."
    - Empty state: styled with Upload icon + muted text + encouragement
    - Replace ALL raw color classes

    **Imports needed:**
    - Memory: Card, CardContent from @/components/ui/card; Button from @/components/ui/button; Badge from @/components/ui/badge; Textarea from @/components/ui/textarea; Skeleton from @/components/ui/skeleton; PageHeader from @/components/page-header; Pencil, Trash2 from lucide-react
    - Documents: Card from @/components/ui/card; Button from @/components/ui/button; Badge from @/components/ui/badge; Skeleton from @/components/ui/skeleton; PageHeader from @/components/page-header; Upload, Trash2 from lucide-react
  </action>
  <verify>
    - `cd apps/web && npx tsc --noEmit` passes
    - `grep "bg-blue-600\|bg-neutral-\|text-neutral-\|border-neutral-\|bg-green-100\|text-green-800\|bg-red-100\|text-red-800\|bg-yellow-100\|text-yellow-800\|bg-blue-100\|text-blue-800\|bg-purple-100\|bg-orange-100\|bg-pink-100\|bg-slate-100" apps/web/src/app/\\(app\\)/memory/page.tsx` returns NO matches
    - `grep "bg-blue-600\|bg-neutral-\|text-neutral-\|border-neutral-\|bg-green-100\|text-green-800\|bg-red-100\|text-red-800\|bg-yellow-100\|text-yellow-800\|border-blue-400\|bg-blue-50" apps/web/src/app/\\(app\\)/documents/page.tsx` returns NO matches
    - `grep "import.*Badge" apps/web/src/app/\\(app\\)/memory/page.tsx` returns match
    - `grep "import.*Badge" apps/web/src/app/\\(app\\)/documents/page.tsx` returns match
    - `grep "Pencil\|Trash2" apps/web/src/app/\\(app\\)/memory/page.tsx` returns match
  </verify>
  <done>
    Memory page uses Card + Badge + lucide icons for categorized fact display with edit/delete. Documents page has a design-token styled upload zone with Badge status indicators and lucide icons. Both pages use semantic tokens with no raw color classes. All existing functionality (edit facts, delete facts, upload docs, delete docs) works unchanged.
  </done>
</task>

</tasks>

<verification>
- `cd apps/web && npm run build` completes without errors
- All four pages (agents list, agent detail, memory, documents) use shadcn/ui components
- No raw Tailwind color classes remain in any of the four files
- Agents list shows agent cards in a grid with Dialog for create/edit
- Agent detail uses Tabs for organized sections
- Memory uses Badge for categories with inline edit
- Documents has styled upload area with status badges
- Unicode emoji icons replaced with lucide-react icons
</verification>

<success_criteria>
- Agents list: Card grid, Dialog for CRUD, Badge for Starter/Archived status
- Agent detail: Tabs (Prompt/Versions/Feedback), Card-based version cards with Badge for source
- Memory: Categorized fact Cards with Badge categories, Pencil/Trash2 icon buttons
- Documents: Styled drag-drop upload zone, Badge for document status (ready/processing/error), Trash2 icon
- All four pages use semantic tokens exclusively
- All existing logic (create, edit, delete, archive, revert, upload) works unchanged
- `npm run build` passes
</success_criteria>

<output>
After completion, create `.planning/phases/05-ui-polish-styling/05-04-SUMMARY.md`
</output>

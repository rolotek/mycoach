---
phase: 05-ui-polish-styling
plan: 05
type: execute
wave: 3
depends_on: ["05-02", "05-03", "05-04"]
files_modified:
  - apps/web/src/app/(app)/chat/[id]/page.tsx
  - apps/web/src/app/(app)/chat/page.tsx
autonomous: false
must_haves:
  truths:
    - "All pages compile and render without errors"
    - "No raw Tailwind color classes (bg-blue-*, text-neutral-*, border-neutral-*) exist anywhere in apps/web/src/"
    - "Dark mode works on every page"
    - "Sidebar navigation works on all (app) routes"
    - "Chat page layout is correct (messages scroll, input pinned to bottom)"
    - "App looks cohesive and professional across all pages"
  artifacts:
    - path: "apps/web/src/"
      provides: "All pages fully restyled with consistent design system"
  key_links:
    - from: "all page files"
      to: "@/components/ui/*"
      via: "shadcn/ui component imports"
      pattern: "import.*from.*@/components/ui/"
---

<objective>
Final consistency pass and visual verification. Fix any remaining raw color classes, layout issues, or styling inconsistencies across all pages. Then checkpoint for human visual review.

Purpose: After three parallel restyling plans, there may be minor inconsistencies, missed raw classes, or layout regressions. This plan catches those issues and gets human sign-off.

Output: A fully polished, visually consistent app ready for use.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-ui-polish-styling/05-01-SUMMARY.md
@.planning/phases/05-ui-polish-styling/05-02-SUMMARY.md
@.planning/phases/05-ui-polish-styling/05-03-SUMMARY.md
@.planning/phases/05-ui-polish-styling/05-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit and fix remaining raw color classes, build verification, consistency sweep</name>
  <files>
    apps/web/src/app/(app)/chat/[id]/page.tsx
    apps/web/src/app/(app)/chat/page.tsx
  </files>
  <action>
    1. Run a comprehensive grep across ALL files in apps/web/src/ for raw Tailwind color classes that should have been replaced:
       ```bash
       grep -rn "bg-blue-\|bg-neutral-\|text-neutral-\|border-neutral-\|bg-red-\|text-red-\|bg-green-\|text-green-\|bg-amber-\|bg-indigo-\|border-indigo-\|bg-yellow-\|text-yellow-" apps/web/src/ --include="*.tsx" --include="*.ts"
       ```
       NOTE: Some green/blue accent colors in Badge categoryStyle (memory page) or border-l accents (agent result) are acceptable thematic uses. Focus on removing:
       - `bg-blue-600` / `bg-blue-700` (should be bg-primary)
       - `text-neutral-*` (should be text-foreground or text-muted-foreground)
       - `bg-neutral-*` (should be bg-background, bg-muted, bg-card, or bg-accent)
       - `border-neutral-*` (should be border-border or border-input)
       - `text-red-600` (should be text-destructive)
       - `bg-red-50` (should be bg-destructive/10)

    2. Fix any remaining raw classes found in step 1. For each file with violations, update to use semantic tokens.

    3. Check the chat/page.tsx (redirect page) -- it may need minor updates if it has any styling:
       - Read the file, update if needed to use design tokens

    4. Run `cd apps/web && npm run build` to verify the entire app builds without errors.

    5. Run `cd apps/web && npx tsc --noEmit` for type checking.

    6. Verify the chat page layout works correctly:
       - The `h-[calc(100vh-3.5rem)]` (or whatever height calc was used in Plan 03) must account for the app shell header correctly
       - If the app shell header height differs, adjust the calc

    7. Check that dark mode classes work:
       - Verify `@custom-variant dark` is in globals.css
       - Verify ThemeProvider uses `attribute="class"`
       - Verify `suppressHydrationWarning` is on the html element
  </action>
  <verify>
    - `cd apps/web && npm run build` passes
    - `cd apps/web && npx tsc --noEmit` passes
    - `grep -rn "bg-blue-600\|bg-blue-700" apps/web/src/ --include="*.tsx"` returns NO matches
    - `grep -rn "min-h-screen bg-neutral-50 p-8" apps/web/src/ --include="*.tsx"` returns NO matches (old page wrapper pattern is gone)
  </verify>
  <done>
    All raw Tailwind color classes are replaced with semantic design tokens across the entire app. The app builds successfully with no type errors. Dark mode configuration is correct. Chat layout height calculation is correct.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual verification of complete UI polish</name>
  <files>apps/web/src/</files>
  <action>
    Present the completed UI polish to the user for visual verification. The user will test all pages in both light and dark mode, at desktop and mobile widths, confirming the app looks professionally designed and all functionality works.

    What was built across Plans 01-05:
    - Design system with OKLCH color tokens, dark mode, Inter font
    - App shell with collapsible sidebar navigation (Dashboard, Chat, Agents, Memory, Documents, Settings)
    - Auth pages (login/signup) with Card + shadcn/ui form components
    - Dashboard with card-based navigation grid
    - Chat with responsive conversation sidebar, react-markdown rendering, styled agent cards
    - Agents list with Dialog for create/edit, detail page with Tabs
    - Memory with categorized fact cards and Badge categories
    - Documents with styled upload zone and status badges
    - Settings with Select dropdowns
    - Dark mode toggle in sidebar footer

    Steps for the user to verify:
    1. Start the dev server: `cd apps/web && npm run dev` (and server: `cd apps/server && npm run dev`)
    2. Visit http://localhost:3000/login -- centered card with styled form inputs, "or" separator, social login buttons
    3. Log in and check dashboard -- sidebar navigation, card grid with icons, sidebar collapse
    4. Toggle dark mode in sidebar footer -- entire app switches themes
    5. Navigate to Chat -- conversation sidebar, messages, markdown rendering, auto-scroll
    6. Navigate to Agents -- card grid, Dialog for create, Tabs on detail page
    7. Navigate to Memory -- categorized facts, colored badges, edit/delete icons
    8. Navigate to Documents -- styled upload area, status badges
    9. Navigate to Settings -- Select dropdowns, Save button
    10. Resize to mobile (~375px) -- sidebar becomes sheet, pages readable
  </action>
  <verify>User confirms visual quality by typing "approved" or describes issues.</verify>
  <done>Human has visually verified all pages look polished and consistent, with working dark mode and responsive layouts. No regressions in functionality.</done>
</task>

</tasks>

<verification>
- Full app builds with `npm run build`
- No raw Tailwind color classes remain in any page/component
- Dark mode works on all pages
- Mobile responsive on all pages
- Sidebar navigation works correctly
- Chat messages render markdown properly
</verification>

<success_criteria>
- Human verifies the app looks professionally designed and polished
- All pages have consistent styling (colors, typography, spacing, components)
- Dark mode works without visual glitches
- Mobile layout is usable (sidebar collapses, pages stack vertically)
- Chat page maintains correct scroll behavior and input pinning
- No regressions in functionality (auth, chat, agents, memory, documents, settings all work)
</success_criteria>

<output>
After completion, create `.planning/phases/05-ui-polish-styling/05-05-SUMMARY.md`
</output>
